{"ast":null,"code":"import _slicedToArray from\"F:/Github/Emerald-Oasis/naitik_rathor/react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";import PlacedOrder from\"../../../components/PlacedOrders/placedOrders\";import{URL}from\"../../../config\";import'../../employeeSide/HomePage/employeeHome.css';import{formatDate}from\"../../../utils\";import{toast}from\"react-toastify\";import UserHeader from\"../../../components/UserHeader/userHeader\";import EmployeeHeader from\"../../../components/EmployeeHeader/employeeHeader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EmployeeHome=function EmployeeHome(){var _sessionStorage=sessionStorage,userId=_sessionStorage.userId;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),order=_useState4[0],setOrder=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),customer=_useState6[0],setCustomer=_useState6[1];useEffect(function(){getPlacedOrders();getAcceptedOrder();},[]);var getAcceptedOrder=function getAcceptedOrder(){var url=\"\".concat(URL,\"/employee/acceptedorder/\").concat(userId);axios.get(url).then(function(response){var result=response.data;if(result.status==='success'){setOrder(result.data);console.log(result.data);axios.get(\"\".concat(URL,\"/employee/customer/\").concat(userId)).then(function(res){var resu=res.data;if(resu.status==='success'){setCustomer(resu.data);console.log(resu.data);}});}});};var getPlacedOrders=function getPlacedOrders(){var url=\"\".concat(URL,\"/employee/getorders\");axios.get(url).then(function(response){var result=response.data;if(result.status==='success'){setOrders(result.data);console.log(result.data);}else{console.log(result.error);}});};var confirmOrder=function confirmOrder(id){console.log(id);var url=\"\".concat(URL,\"/employee/confirmdelivery/\").concat(id);axios.put(url).then(function(response){var result=response.data;if(result.status=='success'){toast.success(\"Order delivered\");window.location.reload(false);}else{toast.error(result.error);}});};var reportOrder=function reportOrder(id){console.log(id);var url=\"\".concat(URL,\"/employee/reportorder/\").concat(id);axios.put(url).then(function(response){var result=response.data;if(result.status=='success'){toast.success(\"Order reported\");window.location.reload(false);}else{toast.error(result.error);}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(EmployeeHeader,{}),!order&&/*#__PURE__*/_jsxs(\"div\",{className:\"row orders\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Available Orders\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:orders.map(function(order){return/*#__PURE__*/_jsx(PlacedOrder,{order:order});})})]}),customer&&order&&order.orderStatus=='ONTHEWAY'&&/*#__PURE__*/_jsxs(\"div\",{className:\"row orders\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Accepted Order\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Ordered timestamp :-\"}),formatDate(order.orderedTimeStamp),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h6\",{children:\"Delivery Address :-\"}),order.address,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h6\",{children:\"Order total :-\"}),\"Rs. \",order.totalAmount,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){confirmOrder(order.orderId);},type:\"button\",className:\"btn btn-success\",children:\"Confirm\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){reportOrder(order.orderId);},type:\"button\",className:\"btn btn-danger\",children:\"Report\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Customer name :-\"}),customer.firstName,\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h6\",{children:\"Customer phone :-\"}),customer.phoneNo,\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h6\",{children:\"Customer email :-\"}),customer.email]}),/*#__PURE__*/_jsx(\"div\",{className:\"col\"})]}),orders.length==0&&!order&&/*#__PURE__*/_jsx(\"div\",{className:\"row orders\",children:\"No orders available right now.\"})]});};export default EmployeeHome;","map":{"version":3,"sources":["F:/Github/Emerald-Oasis/naitik_rathor/react-app/src/pages/employeeSide/HomePage/employeeHome.js"],"names":["axios","useEffect","useState","PlacedOrder","URL","formatDate","toast","UserHeader","EmployeeHeader","EmployeeHome","sessionStorage","userId","orders","setOrders","order","setOrder","customer","setCustomer","getPlacedOrders","getAcceptedOrder","url","get","then","response","result","data","status","console","log","res","resu","error","confirmOrder","id","put","success","window","location","reload","reportOrder","map","orderStatus","orderedTimeStamp","address","totalAmount","orderId","firstName","phoneNo","email","length"],"mappings":"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","sourcesContent":["import axios from \"axios\"\r\nimport { useEffect, useState } from \"react\"\r\nimport PlacedOrder from \"../../../components/PlacedOrders/placedOrders\"\r\nimport { URL } from \"../../../config\"\r\nimport '../../employeeSide/HomePage/employeeHome.css'\r\nimport { formatDate } from \"../../../utils\"\r\nimport { toast } from \"react-toastify\"\r\nimport UserHeader from \"../../../components/UserHeader/userHeader\"\r\nimport EmployeeHeader from \"../../../components/EmployeeHeader/employeeHeader\"\r\n\r\n\r\nconst EmployeeHome = () => {\r\n\r\n    const { userId } = sessionStorage\r\n    const [orders, setOrders] = useState([])\r\n    const [order, setOrder] = useState()\r\n    const [customer, setCustomer] = useState()\r\n\r\n    useEffect(() => {\r\n        getPlacedOrders()\r\n        getAcceptedOrder()\r\n    }, [])\r\n\r\n    const getAcceptedOrder = () => {\r\n        const url = `${URL}/employee/acceptedorder/${userId}`\r\n\r\n        axios.get(url).then((response) => {\r\n            const result = response.data\r\n            if (result.status === 'success') {\r\n                setOrder(result.data)\r\n                console.log(result.data)\r\n                axios.get(`${URL}/employee/customer/${userId}`).then((res) => {\r\n                    const resu = res.data\r\n                    if(resu.status === 'success') {\r\n                        setCustomer(resu.data)\r\n                        console.log(resu.data)\r\n                    }\r\n                })\r\n            }\r\n        })\r\n\r\n        \r\n    }\r\n\r\n    const getPlacedOrders = () => {\r\n        const url = `${URL}/employee/getorders`\r\n\r\n        axios.get(url).then((response) => {\r\n            const result = response.data\r\n            if (result.status === 'success') {\r\n                setOrders(result.data)\r\n                console.log(result.data)\r\n            } else {\r\n                console.log(result.error)\r\n            }\r\n        })\r\n    }\r\n\r\n    const confirmOrder = (id) => {\r\n        console.log(id)\r\n        const url = `${URL}/employee/confirmdelivery/${id}`\r\n        axios.put(url).then((response) => {\r\n            const result = response.data\r\n            if(result.status == 'success') {\r\n                toast.success(\"Order delivered\")\r\n                window.location.reload(false)\r\n            } else {\r\n                toast.error(result.error)\r\n            }\r\n        })\r\n    }\r\n\r\n    const reportOrder = (id) => {\r\n        console.log(id)\r\n        const url = `${URL}/employee/reportorder/${id}`\r\n        axios.put(url).then((response) => {\r\n            const result = response.data\r\n            if(result.status == 'success') {\r\n                toast.success(\"Order reported\")\r\n                window.location.reload(false)\r\n            } else {\r\n                toast.error(result.error)\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <EmployeeHeader></EmployeeHeader>\r\n            {!order && <div className=\"row orders\">\r\n                <h1>Available Orders</h1>\r\n                <hr />\r\n                <div className=\"col\">\r\n                    {orders.map((order) => {\r\n                        return <PlacedOrder order={order} ></PlacedOrder>\r\n                    })}\r\n                </div>\r\n            </div>}\r\n            {customer && order && order.orderStatus == 'ONTHEWAY' && \r\n            <div className=\"row orders\">\r\n                <h1>Accepted Order</h1>\r\n                <hr />\r\n                <div className=\"col\">\r\n                    <h6>Ordered timestamp :-</h6>{formatDate(order.orderedTimeStamp)} <br /><br />\r\n                    <h6>Delivery Address :-</h6>{order.address} <br /><br />\r\n                    <h6>Order total :-</h6>Rs. {order.totalAmount} <br /><br />\r\n                    <button onClick={() => {\r\n                        confirmOrder(order.orderId)\r\n                    }} type=\"button\" className=\"btn btn-success\">Confirm</button> <br /> <br />\r\n                    <button onClick={() => {\r\n                        reportOrder(order.orderId)\r\n                    }} type=\"button\" className=\"btn btn-danger\">Report</button>\r\n                </div>\r\n                <div className=\"col\">\r\n                    <h6>Customer name :-</h6>{customer.firstName} <br /> <br />\r\n                    <h6>Customer phone :-</h6>{customer.phoneNo} <br /> <br />\r\n                    <h6>Customer email :-</h6>{customer.email} \r\n                </div>\r\n                <div className=\"col\"></div>\r\n            </div>}\r\n\r\n            {orders.length == 0 && !order &&\r\n            <div className=\"row orders\">\r\n                No orders available right now.\r\n            </div>}\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EmployeeHome"]},"metadata":{},"sourceType":"module"}